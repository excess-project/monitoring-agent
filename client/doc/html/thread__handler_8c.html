<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Monitoring Framework Client: thread_handler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Monitoring Framework Client
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Prototype of the Monitoring Framework used by EXCESS and DreamCloud</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('thread__handler_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">thread_handler.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;publisher.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="excess__main_8h_source.html">excess_main.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread__handler_8h_source.html">thread_handler.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="plugin__manager_8h_source.html">plugin_manager.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="plugin__discover_8h_source.html">plugin_discover.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="util_8h_source.html">util.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abd2ff7a1818f0b90fa28c046ba9694ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#abd2ff7a1818f0b90fa28c046ba9694ac">catcher</a> (int signo)</td></tr>
<tr class="separator:abd2ff7a1818f0b90fa28c046ba9694ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df242c3f48c2e38baaf2aa74ab2cd35"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a3df242c3f48c2e38baaf2aa74ab2cd35">startThreads</a> ()</td></tr>
<tr class="memdesc:a3df242c3f48c2e38baaf2aa74ab2cd35"><td class="mdescLeft">&#160;</td><td class="mdescRight">start the different threads of the tool  <a href="#a3df242c3f48c2e38baaf2aa74ab2cd35">More...</a><br/></td></tr>
<tr class="separator:a3df242c3f48c2e38baaf2aa74ab2cd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc315c48f30550b2e10555b10de564d6"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#acc315c48f30550b2e10555b10de564d6">entryThreads</a> (void *arg)</td></tr>
<tr class="memdesc:acc315c48f30550b2e10555b10de564d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">entry function for threads, purpose of each thread is defined here  <a href="#acc315c48f30550b2e10555b10de564d6">More...</a><br/></td></tr>
<tr class="separator:acc315c48f30550b2e10555b10de564d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d1676e9f2c555187c3a7b7a36ff0949"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a7d1676e9f2c555187c3a7b7a36ff0949">startSending</a> ()</td></tr>
<tr class="memdesc:a7d1676e9f2c555187c3a7b7a36ff0949"><td class="mdescLeft">&#160;</td><td class="mdescRight">pop from queue and send data, hook for sending thread  <a href="#a7d1676e9f2c555187c3a7b7a36ff0949">More...</a><br/></td></tr>
<tr class="separator:a7d1676e9f2c555187c3a7b7a36ff0949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3a62d901e2019dbe71c0de7cecec226"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#ad3a62d901e2019dbe71c0de7cecec226">removeSpace</a> (char *str)</td></tr>
<tr class="separator:ad3a62d901e2019dbe71c0de7cecec226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a126cebab85d1b470693189d93506ef60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a126cebab85d1b470693189d93506ef60">prepSend</a> (<a class="el" href="util_8h.html#a310cb67d3e51c4b7c13fb1047d1c2562">metric</a> data)</td></tr>
<tr class="memdesc:a126cebab85d1b470693189d93506ef60"><td class="mdescLeft">&#160;</td><td class="mdescRight">prepare for sending data  <a href="#a126cebab85d1b470693189d93506ef60">More...</a><br/></td></tr>
<tr class="separator:a126cebab85d1b470693189d93506ef60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e3073198549e1176d8c2ae0a129d33"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a66e3073198549e1176d8c2ae0a129d33">gatherMetric</a> (int num)</td></tr>
<tr class="memdesc:a66e3073198549e1176d8c2ae0a129d33"><td class="mdescLeft">&#160;</td><td class="mdescRight">gather a metric, use the hook of the plugin  <a href="#a66e3073198549e1176d8c2ae0a129d33">More...</a><br/></td></tr>
<tr class="separator:a66e3073198549e1176d8c2ae0a129d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f23b4e4c00a14d0fa684b56942a6ee8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a4f23b4e4c00a14d0fa684b56942a6ee8">checkConf</a> ()</td></tr>
<tr class="memdesc:a4f23b4e4c00a14d0fa684b56942a6ee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if config at a specific frequency  <a href="#a4f23b4e4c00a14d0fa684b56942a6ee8">More...</a><br/></td></tr>
<tr class="separator:a4f23b4e4c00a14d0fa684b56942a6ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f45113638a0b749a8a205d2cd7fb42b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a2f45113638a0b749a8a205d2cd7fb42b">running</a></td></tr>
<tr class="memdesc:a2f45113638a0b749a8a205d2cd7fb42b"><td class="mdescLeft">&#160;</td><td class="mdescRight">flags which indicates whether gathering cycle is running or not  <a href="#a2f45113638a0b749a8a205d2cd7fb42b">More...</a><br/></td></tr>
<tr class="separator:a2f45113638a0b749a8a205d2cd7fb42b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acff8232e4aec9cd5c6dc200ac55ef3"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr class="separator:a4acff8232e4aec9cd5c6dc200ac55ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0108be64b1da38e70fe49439ec1b7315"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#a0108be64b1da38e70fe49439ec1b7315">threads</a> [256]</td></tr>
<tr class="separator:a0108be64b1da38e70fe49439ec1b7315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc547fe00207c7a4010dad0f888253d0"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__handler_8c.html#afc547fe00207c7a4010dad0f888253d0">timings</a> [256]</td></tr>
<tr class="memdesc:afc547fe00207c7a4010dad0f888253d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array containing the timings of the plugins.  <a href="#afc547fe00207c7a4010dad0f888253d0">More...</a><br/></td></tr>
<tr class="separator:afc547fe00207c7a4010dad0f888253d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abd2ff7a1818f0b90fa28c046ba9694ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void catcher </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f23b4e4c00a14d0fa684b56942a6ee8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int checkConf </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if config at a specific frequency </p>

</div>
</div>
<a class="anchor" id="acc315c48f30550b2e10555b10de564d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* entryThreads </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>entry function for threads, purpose of each thread is defined here </p>

</div>
</div>
<a class="anchor" id="a66e3073198549e1176d8c2ae0a129d33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gatherMetric </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gather a metric, use the hook of the plugin </p>

</div>
</div>
<a class="anchor" id="a126cebab85d1b470693189d93506ef60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prepSend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="util_8h.html#a310cb67d3e51c4b7c13fb1047d1c2562">metric</a>&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prepare for sending data </p>

</div>
</div>
<a class="anchor" id="ad3a62d901e2019dbe71c0de7cecec226"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void removeSpace </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7d1676e9f2c555187c3a7b7a36ff0949"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int startSending </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>pop from queue and send data, hook for sending thread </p>

</div>
</div>
<a class="anchor" id="a3df242c3f48c2e38baaf2aa74ab2cd35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int startThreads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>start the different threads of the tool </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a4acff8232e4aec9cd5c6dc200ac55ef3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2f45113638a0b749a8a205d2cd7fb42b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int running</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>flags which indicates whether gathering cycle is running or not </p>

</div>
</div>
<a class="anchor" id="a0108be64b1da38e70fe49439ec1b7315"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t threads[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afc547fe00207c7a4010dad0f888253d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long timings[256]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array containing the timings of the plugins. </p>
<p>The array containing the timings of the plugins allows to store the timing for up to 254 plugins, the first two values are reserved for the timing of the threads which manage the re-read of the config file and the sending of the gathered data. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="thread__handler_8c.html">thread_handler.c</a></li>
    <li class="footer">Generated on Thu Nov 27 2014 14:14:01 for Monitoring Framework Client by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
